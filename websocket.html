<!DOCTYPE html>
<html lang="en">
<head>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
<title>Websocket example</title>


<style>
#lcd{  
    border:1px solid grey;  
    width:16ex;
    height:4ex; 
}  
pre {
margin: 0px;
}
</style>
</head>
<body>



<script type="text/javascript">
/*
var conn = new WebSocket('ws://localhost:8080');
conn.onopen = function(e) {
    console.log("Connection established!");
};

conn.onmessage = function(e) {
    console.log(e.data);
};
*/

$(document).ready(function() {  
	  
	  if ("WebSocket" in window) {  
  
	      //The user has WebSockets  
	  
	      connect();  
	  
	      function connect(){  
	          var socket;  
	          var host = "ws://localhost:8080";  
	          var backlight = '0';
	  
	          try{  
	              var socket = new WebSocket(host);  
	  
	              message('Socket Status: ' + socket.readyState);  
	  

	              socket.onmessage = function(msg) {  
	            	   $.trim(msg.data);
	            	   if (msg.data.indexOf('backlight:') == 0) {
	            		   backlight = msg.data.replace('backlight:', '');  
	            		   console.log(backlight);
	            		   if (backlight == 0) {
	            			   // off
	            			   $('#lcd').css('background-color', '#FFF');
	            		   } else {
	            			   // on
	                     $('#lcd').css('background-color', 'yellow');
	            		   }
	                 } else {
	                	 message(msg.data);  
	                 }
	              }  

	          } catch(exception) {  
	             //message(exception);  
	          }  

	          function message(str){  
	            $('#lcd').html('<pre>' + str + '</pre>');  
	            //console.log(str);
	          }   
	  
	      } 
	  
	  }  
	  
});  
</script>


  
<h1>WebSocket Lcdproc</h1>  

<div id="lcd"></div>


 
</body>
</html>